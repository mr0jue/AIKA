时序模型优化（Sequential Model-Based Optimization，SMBO）\[Hutter et al., 2011]．
假设超参数优化的函数𝑓(𝒙)服从高斯过程，则 𝑝(𝑓(𝒙)|𝒙) 为一个正态分布．贝叶斯优化过程是根据已有的 𝑁 组试验结果 ℋ = {𝒙𝑛, 𝑦𝑛}{𝑛=1,...,𝑁}（𝑦𝑛 为 𝑓(𝒙𝑛) 的观测值）来建模高斯过程，并计算 𝑓(𝒙) 的后验分布𝑝_𝒢𝒫(𝑓(𝒙)|𝒙, ℋ)．

为了使得 𝑝_𝒢𝒫(𝑓(𝒙)|𝒙, ℋ) 接近其真实分布，就需要对样本空间进行足够多的采样．但是超参数优化中每一个样本的生成成本很高，需要用尽可能少的样本来使得 𝑝_𝜃(𝑓(𝒙)|𝒙, ℋ) 接近于真实分布．因此，需要通过定义一个*收益函数*（Acquisition Function）𝑎(𝑥, ℋ) 来判断一个样本是否能够给建模 𝑝_𝜃(𝑓(𝒙)|𝒙, ℋ) 提供更多的收益．收益越大，其修正的高斯过程会越接近目标函数的真实分布．

收益函数的定义有很多种方式．一个常用的是[[期望改善]]（Expected Improvement，EI）函数．收益函数还有其他定义形式，比如改善概率（Probability of Improvement）、高斯过程置信上界（GP Upper ConfidenceBound，GP-UCB）等．

假设𝑦∗ = min{𝑦𝑛, 1 ≤ 𝑛 ≤ 𝑁}是当前已有样本中的最优值，期望改善函数为，
`EI(𝒙, ℋ) = ∫{∞;−∞}max(𝑦∗ − 𝑦, 0)𝑝_𝒢𝒫(𝑦|𝒙, ℋ)d𝑦.`
期望改善是定义一个样本 𝒙 在当前模型 𝑝_𝒢𝒫(𝑓(𝒙)|𝒙, ℋ) 下，𝑓(𝒙) 超过最好结果𝑦∗ 的期望．除了期望改善函数之外，

### 时序模型优化方法
```
输入: 优化目标函数𝑓(𝒙)，迭代次数𝑇，收益函数𝑎(𝑥, ℋ)
1 ℋ ← ∅; 
2 随机初始化高斯过程，并计算𝑝_𝒢𝒫(𝑓(𝒙)|𝒙, ℋ); 
3 for 𝑡 ← 1 to 𝑇 do
4 	𝒙′ ← arg max{𝑥}𝑎(𝑥, ℋ); 
5 	评价𝑦′ = 𝑓(𝒙′) ; // 代价高
6 	ℋ ← ℋ ∪ (𝒙′, 𝑦′); 
7 	根据ℋ 重新建模高斯过程，并计算𝑝_𝒢𝒫(𝑓(𝒙)|𝒙, ℋ); 
8 end
输出: ℋ
```